
var __cov_Yw0ylkpbMM6tbVz5kRg0Gw = (Function('return this'))();
if (!__cov_Yw0ylkpbMM6tbVz5kRg0Gw.__coverage__) { __cov_Yw0ylkpbMM6tbVz5kRg0Gw.__coverage__ = {}; }
__cov_Yw0ylkpbMM6tbVz5kRg0Gw = __cov_Yw0ylkpbMM6tbVz5kRg0Gw.__coverage__;
if (!(__cov_Yw0ylkpbMM6tbVz5kRg0Gw['/home/volland/workspace/package_geoext_extjs6/packages/local/geoext3/src/data/MapfishPrintProvider.js'])) {
   __cov_Yw0ylkpbMM6tbVz5kRg0Gw['/home/volland/workspace/package_geoext_extjs6/packages/local/geoext3/src/data/MapfishPrintProvider.js'] = {"path":"/home/volland/workspace/package_geoext_extjs6/packages/local/geoext3/src/data/MapfishPrintProvider.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":41,"loc":{"start":{"line":41,"column":29},"end":{"line":41,"column":49}}},"2":{"name":"(anonymous_2)","line":43,"loc":{"start":{"line":43,"column":28},"end":{"line":43,"column":47}}},"3":{"name":"(anonymous_3)","line":70,"loc":{"start":{"line":70,"column":27},"end":{"line":70,"column":74}}},"4":{"name":"(anonymous_4)","line":107,"loc":{"start":{"line":107,"column":17},"end":{"line":107,"column":30}}},"5":{"name":"(anonymous_5)","line":120,"loc":{"start":{"line":120,"column":23},"end":{"line":120,"column":33}}},"6":{"name":"(anonymous_6)","line":125,"loc":{"start":{"line":125,"column":37},"end":{"line":125,"column":47}}}},"statementMap":{"1":{"start":{"line":20,"column":0},"end":{"line":154,"column":3}},"2":{"start":{"line":42,"column":12},"end":{"line":42,"column":38}},"3":{"start":{"line":43,"column":12},"end":{"line":61,"column":15}},"4":{"start":{"line":44,"column":16},"end":{"line":44,"column":50}},"5":{"start":{"line":45,"column":16},"end":{"line":45,"column":47}},"6":{"start":{"line":46,"column":16},"end":{"line":60,"column":17}},"7":{"start":{"line":47,"column":20},"end":{"line":56,"column":22}},"8":{"start":{"line":57,"column":20},"end":{"line":57,"column":54}},"9":{"start":{"line":62,"column":12},"end":{"line":62,"column":36}},"10":{"start":{"line":71,"column":12},"end":{"line":71,"column":60}},"11":{"start":{"line":72,"column":12},"end":{"line":72,"column":62}},"12":{"start":{"line":73,"column":12},"end":{"line":73,"column":73}},"13":{"start":{"line":74,"column":12},"end":{"line":74,"column":34}},"14":{"start":{"line":75,"column":12},"end":{"line":75,"column":73}},"15":{"start":{"line":76,"column":12},"end":{"line":76,"column":28}},"16":{"start":{"line":77,"column":12},"end":{"line":77,"column":29}},"17":{"start":{"line":78,"column":12},"end":{"line":78,"column":27}},"18":{"start":{"line":79,"column":12},"end":{"line":79,"column":21}},"19":{"start":{"line":81,"column":12},"end":{"line":87,"column":13}},"20":{"start":{"line":82,"column":16},"end":{"line":82,"column":62}},"21":{"start":{"line":83,"column":16},"end":{"line":83,"column":63}},"22":{"start":{"line":85,"column":16},"end":{"line":85,"column":64}},"23":{"start":{"line":86,"column":16},"end":{"line":86,"column":63}},"24":{"start":{"line":89,"column":12},"end":{"line":92,"column":15}},"25":{"start":{"line":93,"column":12},"end":{"line":93,"column":74}},"26":{"start":{"line":94,"column":12},"end":{"line":94,"column":53}},"27":{"start":{"line":95,"column":12},"end":{"line":95,"column":24}},"28":{"start":{"line":108,"column":8},"end":{"line":108,"column":59}},"29":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"30":{"start":{"line":110,"column":12},"end":{"line":110,"column":66}},"31":{"start":{"line":112,"column":8},"end":{"line":112,"column":29}},"32":{"start":{"line":113,"column":8},"end":{"line":113,"column":33}},"33":{"start":{"line":122,"column":8},"end":{"line":122,"column":18}},"34":{"start":{"line":123,"column":8},"end":{"line":123,"column":50}},"35":{"start":{"line":124,"column":8},"end":{"line":124,"column":32}},"36":{"start":{"line":125,"column":8},"end":{"line":128,"column":10}},"37":{"start":{"line":126,"column":12},"end":{"line":126,"column":48}},"38":{"start":{"line":127,"column":12},"end":{"line":127,"column":42}},"39":{"start":{"line":129,"column":8},"end":{"line":152,"column":9}},"40":{"start":{"line":130,"column":12},"end":{"line":136,"column":15}},"41":{"start":{"line":137,"column":12},"end":{"line":137,"column":44}},"42":{"start":{"line":138,"column":15},"end":{"line":152,"column":9}},"43":{"start":{"line":139,"column":12},"end":{"line":151,"column":15}}},"branchMap":{"1":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":16},"end":{"line":46,"column":16}},{"start":{"line":46,"column":16},"end":{"line":46,"column":16}}]},"2":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":12},"end":{"line":81,"column":12}},{"start":{"line":81,"column":12},"end":{"line":81,"column":12}}]},"3":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":109,"column":8}},{"start":{"line":109,"column":8},"end":{"line":109,"column":8}}]},"4":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":12},"end":{"line":109,"column":29}},{"start":{"line":109,"column":33},"end":{"line":109,"column":41}}]},"5":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"6":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":15},"end":{"line":138,"column":15}},{"start":{"line":138,"column":15},"end":{"line":138,"column":15}}]}}};
}
__cov_Yw0ylkpbMM6tbVz5kRg0Gw = __cov_Yw0ylkpbMM6tbVz5kRg0Gw['/home/volland/workspace/package_geoext_extjs6/packages/local/geoext3/src/data/MapfishPrintProvider.js'];
__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['1']++;Ext.define('GeoExt.data.MapfishPrintProvider',{extend:'Ext.Base',mixins:['Ext.mixin.Observable'],requires:['GeoExt.data.model.print.Capability','Ext.data.JsonStore'],config:{capabilities:null,url:''},statics:{getSerializedLayers:function(layerStore){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.f['1']++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['2']++;var serializedLayers=[];__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['3']++;layerStore.each(function(layerRec){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.f['2']++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['4']++;var layer=layerRec.getOlLayer();__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['5']++;var source=layer.getSource();__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['6']++;if(source instanceof ol.source.TileWMS){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['1'][0]++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['7']++;var serialized={'baseURL':source.getUrls()[0],'customParams':source.getParams(),'layers':[source.getParams().LAYERS],'opacity':layer.getOpacity(),'styles':[''],'type':'WMS'};__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['8']++;serializedLayers.push(serialized);}else{__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['1'][1]++;}});__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['9']++;return serializedLayers;},renderPrintExtent:function(mapComponent,extentLayer,clientInfo){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.f['3']++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['10']++;var mapComponentWidth=mapComponent.getWidth();__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['11']++;var mapComponentHeight=mapComponent.getHeight();__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['12']++;var currentMapRatio=mapComponentWidth/mapComponentHeight;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['13']++;var scaleFactor=0.6;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['14']++;var desiredPrintRatio=clientInfo.width/clientInfo.height;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['15']++;var targetWidth;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['16']++;var targetHeight;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['17']++;var geomExtent;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['18']++;var feat;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['19']++;if(desiredPrintRatio>=currentMapRatio){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['2'][0]++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['20']++;targetWidth=mapComponentWidth*scaleFactor;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['21']++;targetHeight=targetWidth/desiredPrintRatio;}else{__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['2'][1]++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['22']++;targetHeight=mapComponentHeight*scaleFactor;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['23']++;targetWidth=targetHeight*desiredPrintRatio;}__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['24']++;geomExtent=mapComponent.getView().calculateExtent([targetWidth,targetHeight]);__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['25']++;feat=new ol.Feature(ol.geom.Polygon.fromExtent(geomExtent));__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['26']++;extentLayer.getSource().addFeature(feat);__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['27']++;return feat;}},capabilityRec:null,constructor:function(cfg){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.f['4']++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['28']++;this.mixins.observable.constructor.call(this,cfg);__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['29']++;if((__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['4'][0]++,!cfg.capabilities)&&(__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['4'][1]++,!cfg.url)){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['3'][0]++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['30']++;Ext.Error.raise('Print capabilities or Url required');}else{__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['3'][1]++;}__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['31']++;this.initConfig(cfg);__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['32']++;this.fillCapabilityRec();},fillCapabilityRec:function(){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.f['5']++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['33']++;var store;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['34']++;var capabilities=this.getCapabilities();__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['35']++;var url=this.getUrl();__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['36']++;var fillRecordAndFireEvent=function(){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.f['6']++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['37']++;this.capabilityRec=store.getAt(0);__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['38']++;this.fireEvent('ready',this);};__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['39']++;if(capabilities){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['5'][0]++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['40']++;store=Ext.create('Ext.data.JsonStore',{model:'GeoExt.data.model.print.Capability',listeners:{datachanged:fillRecordAndFireEvent,scope:this}});__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['41']++;store.loadRawData(capabilities);}else{__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['5'][1]++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['42']++;if(url){__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['6'][0]++;__cov_Yw0ylkpbMM6tbVz5kRg0Gw.s['43']++;store=Ext.create('Ext.data.Store',{autoLoad:true,model:'GeoExt.data.model.print.Capability',proxy:{type:'jsonp',url:url,callbackKey:'jsonp'},listeners:{load:fillRecordAndFireEvent,scope:this}});}else{__cov_Yw0ylkpbMM6tbVz5kRg0Gw.b['6'][1]++;}}}});
